{
    "D3js": {
        "import_script": "<script src='https://d3js.org/d3.v7.min.js'></script>",
        "body": "<div id='d3_visual'></div>",
        "css": "body { font-family: sans-serif; }\n.axis-label { font-size: 12px; }\n.legend-text { font-size: 12px; }\n.line-path { fill: none; stroke: #2ca02c; stroke-width: 1px; }\n.dot { fill: #2ca02c; }",
        "data": "[\n  {\"category\": \"0\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"1\", \"yes\": 200, \"no\": 220, \"none\": 160},\n  {\"category\": \"2\", \"yes\": 100, \"no\": 110, \"none\": 85},\n  {\"category\": \"3\", \"yes\": 400, \"no\": 420, \"none\": 335},\n  {\"category\": \"4\", \"yes\": 150, \"no\": 135, \"none\": 125},\n  {\"category\": \"5\", \"yes\": 250, \"no\": 245, \"none\": 210},\n  {\"category\": \"6\", \"yes\": 45, \"no\": 10, \"none\": 15},\n  {\"category\": \"7\", \"yes\": 25, \"no\": 20, \"none\": 25},\n  {\"category\": \"8\", \"yes\": 35, \"no\": 35, \"none\": 35},\n  {\"category\": \"9\", \"yes\": 10, \"no\": 45, \"none\": 45},\n  {\"category\": \"10\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"11\", \"yes\": 200, \"no\": 220, \"none\": 165}\n]",
        "script_render": "const margin = {top: 20, right: 30, bottom: 60, left: 50};\nconst width = 800 - margin.left - margin.right;\nconst height = 400 - margin.top - margin.bottom;\n\nconst svg = d3.select('#d3_visual')\n  .append('svg')\n  .attr('width', width + margin.left + margin.right)\n  .attr('height', height + margin.top + margin.bottom)\n  .append('g')\n  .attr('transform', `translate(${margin.left},${margin.top})`);\n\nconst x0 = d3.scaleBand().domain(dataset.map(d => d.category)).rangeRound([0, width]).paddingInner(0.2);\nconst x1 = d3.scaleBand().domain(['yes', 'no']).rangeRound([0, x0.bandwidth()]).padding(0.05);\nconst y = d3.scaleLinear().domain([0, 450]).nice().rangeRound([height, 0]);\n\nconst color = d3.scaleOrdinal().domain(['yes', 'no', 'none']).range(['#1f77b4', '#ff7f0e', '#2ca02c']);\n\nsvg.append('g').selectAll('g')\n  .data(dataset).enter().append('g')\n  .attr('transform', d => `translate(${x0(d.category)},0)`)\n  .selectAll('rect')\n  .data(d => ['yes', 'no'].map(key => ({key, value: d[key]})))\n  .enter().append('rect')\n  .attr('x', d => x1(d.key))\n  .attr('y', d => y(d.value))\n  .attr('width', x1.bandwidth())\n  .attr('height', d => height - y(d.value))\n  .attr('fill', d => color(d.key));\n\nconst line = d3.line().x(d => x0(d.category) + x0.bandwidth() / 2).y(d => y(d.none));\nsvg.append('path').datum(dataset).attr('class', 'line-path').attr('d', line);\nsvg.selectAll('.dot').data(dataset).enter().append('circle').attr('class', 'dot')\n  .attr('cx', d => x0(d.category) + x0.bandwidth() / 2).attr('cy', d => y(d.none)).attr('r', 3);\n\nsvg.append('g').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x0));\nsvg.append('g').call(d3.axisLeft(y));\nsvg.append('text').attr('transform', 'rotate(-90)').attr('y', -40).attr('x', -height/2).attr('text-anchor', 'middle').text('Nr. Users').style('font-size', '12px');\n\nconst legend = svg.append('g').attr('transform', `translate(${width/2 - 50}, ${height + 40})`);\n['yes', 'no', 'none'].forEach((key, i) => {\n  const lg = legend.append('g').attr('transform', `translate(${i * 60}, 0)`);\n  lg.append('rect').attr('width', 12).attr('height', 12).attr('fill', color(key));\n  lg.append('text').attr('x', 18).attr('y', 10).text(key).attr('class', 'legend-text');\n});"
    },
    "ECharts": {
        "import_script": "<script src='https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js'></script>",
        "body": "<div id='echarts_visual' style='width: 800px; height: 400px;'></div>",
        "css": "body { display: flex; justify-content: center; }",
        "data": "[\n  {\"category\": \"0\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"1\", \"yes\": 200, \"no\": 220, \"none\": 160},\n  {\"category\": \"2\", \"yes\": 100, \"no\": 110, \"none\": 85},\n  {\"category\": \"3\", \"yes\": 400, \"no\": 420, \"none\": 335},\n  {\"category\": \"4\", \"yes\": 150, \"no\": 135, \"none\": 125},\n  {\"category\": \"5\", \"yes\": 250, \"no\": 245, \"none\": 210},\n  {\"category\": \"6\", \"yes\": 45, \"no\": 10, \"none\": 15},\n  {\"category\": \"7\", \"yes\": 25, \"no\": 20, \"none\": 25},\n  {\"category\": \"8\", \"yes\": 35, \"no\": 35, \"none\": 35},\n  {\"category\": \"9\", \"yes\": 10, \"no\": 45, \"none\": 45},\n  {\"category\": \"10\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"11\", \"yes\": 200, \"no\": 220, \"none\": 165}\n]",
        "script_render": "var myChart = echarts.init(document.getElementById('echarts_visual'));\nvar option = {\n  legend: { bottom: 0, data: ['yes', 'no', 'none'] },\n  xAxis: { type: 'category', data: dataset.map(d => d.category) },\n  yAxis: { type: 'value', name: 'Nr. Users', nameLocation: 'middle', nameGap: 40 },\n  series: [\n    { name: 'yes', type: 'bar', data: dataset.map(d => d.yes), color: '#1f77b4' },\n    { name: 'no', type: 'bar', data: dataset.map(d => d.no), color: '#ff7f0e' },\n    { name: 'none', type: 'line', data: dataset.map(d => d.none), color: '#2ca02c', symbol: 'circle', symbolSize: 6 }\n  ]\n};\nmyChart.setOption(option);"
    },
    "Vega": {
        "import_script": "<script src='https://cdn.jsdelivr.net/npm/vega@5'></script><script src='https://cdn.jsdelivr.net/npm/vega-lite@5'></script><script src='https://cdn.jsdelivr.net/npm/vega-embed@6'></script>",
        "body": "<div id='vega_visual'></div>",
        "css": "body { font-family: sans-serif; }",
        "data": "[\n  {\"category\": \"0\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"1\", \"yes\": 200, \"no\": 220, \"none\": 160},\n  {\"category\": \"2\", \"yes\": 100, \"no\": 110, \"none\": 85},\n  {\"category\": \"3\", \"yes\": 400, \"no\": 420, \"none\": 335},\n  {\"category\": \"4\", \"yes\": 150, \"no\": 135, \"none\": 125},\n  {\"category\": \"5\", \"yes\": 250, \"no\": 245, \"none\": 210},\n  {\"category\": \"6\", \"yes\": 45, \"no\": 10, \"none\": 15},\n  {\"category\": \"7\", \"yes\": 25, \"no\": 20, \"none\": 25},\n  {\"category\": \"8\", \"yes\": 35, \"no\": 35, \"none\": 35},\n  {\"category\": \"9\", \"yes\": 10, \"no\": 45, \"none\": 45},\n  {\"category\": \"10\", \"yes\": 30, \"no\": 50, \"none\": 45},\n  {\"category\": \"11\", \"yes\": 200, \"no\": 220, \"none\": 165}\n]",
        "script_render": "const spec = {\n  $schema: 'https://vega.github.io/schema/vega-lite/v5.json',\n  width: 600, height: 300,\n  data: { values: dataset },\n  layer: [\n    {\n      transform: [{ fold: ['yes', 'no'], as: ['key', 'value'] }],\n      mark: 'bar',\n      encoding: {\n        x: { field: 'category', type: 'nominal', axis: { labelAngle: 0 } },\n        xOffset: { field: 'key' },\n        y: { field: 'value', type: 'quantitative', title: 'Nr. Users' },\n        color: { field: 'key', type: 'nominal', scale: { range: ['#1f77b4', '#ff7f0e'] }, legend: { orient: 'bottom', title: null } }\n      }\n    },\n    {\n      mark: { type: 'line', color: '#2ca02c', point: { color: '#2ca02c' } },\n      encoding: {\n        x: { field: 'category', type: 'nominal' },\n        y: { field: 'none', type: 'quantitative' }\n      }\n    }\n  ]\n};\nvegaEmbed('#vega_visual', spec);"       
    }
}