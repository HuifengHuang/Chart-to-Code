{
  "D3js": {
    "import_script": "<script src=\"https://d3js.org/d3.v7.min.js\"></script>",
    "body": "<div id=\"chart\"></div>",
    "css": "body { margin: 0; padding: 0; overflow: hidden; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; } #chart { width: 95%; height: 95%; }",
    "data": "[\n  {\"id\": \"yes\", \"value\": {\"x\": \"0\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"0\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"0\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"1\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"1\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"1\", \"y\": 160, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"2\", \"y\": 100, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"2\", \"y\": 110, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"2\", \"y\": 80, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"3\", \"y\": 400, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"3\", \"y\": 420, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"3\", \"y\": 330, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"4\", \"y\": 150, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"4\", \"y\": 135, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"4\", \"y\": 120, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"5\", \"y\": 250, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"5\", \"y\": 245, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"5\", \"y\": 210, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"6\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"6\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"6\", \"y\": 15, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"7\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"8\", \"y\": 35, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"9\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"10\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"10\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"10\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"11\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"11\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"11\", \"y\": 160, \"pie_value\": 0}}\n]",
    "script_render": "// Setup container\nconst container = document.getElementById('chart');\nconst width = container.clientWidth;\nconst height = container.clientHeight;\nconst margin = {top: 20, right: 30, bottom: 50, left: 50};\n\n// Create SVG\nconst svg = d3.select(\"#chart\")\n    .append(\"svg\")\n    .attr(\"viewBox\", `0 0 ${width} ${height}`)\n    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\");\n\n// Process Data\nconst categories = [...new Set(dataset.map(d => d.value.x))];\nconst subgroups = [\"yes\", \"no\"]; // Only for bars\n\n// Organize data for bars\nconst barData = [];\ncategories.forEach(cat => {\n    const entry = { x: cat };\n    dataset.filter(d => d.value.x === cat && subgroups.includes(d.id))\n           .forEach(d => entry[d.id] = d.value.y);\n    barData.push(entry);\n});\n\n// Organize data for line\nconst lineData = dataset.filter(d => d.id === \"none\")\n                        .sort((a, b) => parseInt(a.value.x) - parseInt(b.value.x));\n\n// Scales\nconst x0 = d3.scaleBand()\n    .domain(categories)\n    .rangeRound([margin.left, width - margin.right])\n    .paddingInner(0.1);\n\nconst x1 = d3.scaleBand()\n    .domain(subgroups)\n    .rangeRound([0, x0.bandwidth()])\n    .padding(0.05);\n\nconst y = d3.scaleLinear()\n    .domain([0, 450])\n    .rangeRound([height - margin.bottom, margin.top]);\n\nconst color = d3.scaleOrdinal()\n    .domain([\"yes\", \"no\", \"none\"])\n    .range([\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\"]);\n\n// Axes\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(d3.axisBottom(x0));\n\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},0)`)\n    .call(d3.axisLeft(y).ticks(10))\n    .append(\"text\")\n    .attr(\"x\", -margin.left/2)\n    .attr(\"y\", 15)\n    .attr(\"fill\", \"black\")\n    .attr(\"text-anchor\", \"start\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .text(\"Nr. Users\");\n\n// Draw Bars\nsvg.append(\"g\")\n    .selectAll(\"g\")\n    .data(barData)\n    .join(\"g\")\n    .attr(\"transform\", d => `translate(${x0(d.x)},0)`)\n    .selectAll(\"rect\")\n    .data(d => subgroups.map(key => ({key, value: d[key]})))\n    .join(\"rect\")\n    .attr(\"x\", d => x1(d.key))\n    .attr(\"y\", d => y(d.value))\n    .attr(\"width\", x1.bandwidth())\n    .attr(\"height\", d => y(0) - y(d.value))\n    .attr(\"fill\", d => color(d.key));\n\n// Draw Line\nconst line = d3.line()\n    .x(d => x0(d.value.x) + x0.bandwidth() / 2)\n    .y(d => y(d.value.y));\n\nsvg.append(\"path\")\n    .datum(lineData)\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke\", color(\"none\"))\n    .attr(\"stroke-width\", 1.5)\n    .attr(\"d\", line);\n\n// Draw Line Points\nsvg.selectAll(\"circle\")\n    .data(lineData)\n    .join(\"circle\")\n    .attr(\"cx\", d => x0(d.value.x) + x0.bandwidth() / 2)\n    .attr(\"cy\", d => y(d.value.y))\n    .attr(\"r\", 3)\n    .attr(\"fill\", color(\"none\"));\n\n// Legend\nconst legend = svg.append(\"g\")\n    .attr(\"transform\", `translate(${width/2 - 70}, ${height - 10})`);\n\n[\"yes\", \"no\", \"none\"].forEach((id, i) => {\n    const g = legend.append(\"g\").attr(\"transform\", `translate(${i * 60}, 0)`);\n    g.append(\"rect\")\n     .attr(\"width\", 10)\n     .attr(\"height\", 10)\n     .attr(\"fill\", color(id));\n    g.append(\"text\")\n     .attr(\"x\", 15)\n     .attr(\"y\", 10)\n     .text(id)\n     .style(\"font-size\", \"12px\");\n});\n\n// Resize Listener\nwindow.addEventListener('resize', () => {\n    const w = container.clientWidth;\n    const h = container.clientHeight;\n    svg.attr(\"viewBox\", `0 0 ${w} ${h}`);\n    x0.rangeRound([margin.left, w - margin.right]);\n    x1.rangeRound([0, x0.bandwidth()]);\n    y.rangeRound([h - margin.bottom, margin.top]);\n    // Simplified resize: Re-render is usually better for D3, but viewBox handles basic scaling.\n    location.reload();\n});"  
  },
  "echarts": {
    "import_script": "<script src=\"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js\"></script>",
    "body": "<div id=\"main\"></div>",
    "css": "body { margin: 0; padding: 0; overflow: hidden; width: 100vw; height: 100vh; } #main { width: 100%; height: 100%; }",
    "data": "[\n  {\"id\": \"yes\", \"value\": {\"x\": \"0\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"0\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"0\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"1\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"1\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"1\", \"y\": 160, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"2\", \"y\": 100, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"2\", \"y\": 110, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"2\", \"y\": 80, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"3\", \"y\": 400, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"3\", \"y\": 420, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"3\", \"y\": 330, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"4\", \"y\": 150, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"4\", \"y\": 135, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"4\", \"y\": 120, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"5\", \"y\": 250, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"5\", \"y\": 245, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"5\", \"y\": 210, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"6\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"6\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"6\", \"y\": 15, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"7\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"8\", \"y\": 35, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"9\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"10\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"10\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"10\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"11\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"11\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"11\", \"y\": 160, \"pie_value\": 0}}\n]",
    "script_render": "var chartDom = document.getElementById('main');\nvar myChart = echarts.init(chartDom);\nvar option;\n\n// Process data\nconst categories = [...new Set(dataset.map(d => d.value.x))].sort((a,b) => a-b);\nconst dataYes = categories.map(cat => dataset.find(d => d.value.x === cat && d.id === 'yes').value.y);\nconst dataNo = categories.map(cat => dataset.find(d => d.value.x === cat && d.id === 'no').value.y);\nconst dataNone = categories.map(cat => dataset.find(d => d.value.x === cat && d.id === 'none').value.y);\n\noption = {\n  tooltip: {\n    trigger: 'axis',\n    axisPointer: { type: 'shadow' }\n  },\n  legend: {\n    data: ['yes', 'no', 'none'],\n    bottom: 0\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '10%',\n    containLabel: true\n  },\n  xAxis: [\n    {\n      type: 'category',\n      data: categories,\n      axisTick: {\n        alignWithLabel: true\n      }\n    }\n  ],\n  yAxis: [\n    {\n      type: 'value',\n      name: 'Nr. Users',\n      max: 450\n    }\n  ],\n  series: [\n    {\n      name: 'yes',\n      type: 'bar',\n      data: dataYes,\n      itemStyle: { color: '#1f77b4' }\n    },\n    {\n      name: 'no',\n      type: 'bar',\n      data: dataNo,\n      itemStyle: { color: '#ff7f0e' }\n    },\n    {\n      name: 'none',\n      type: 'line',\n      data: dataNone,\n      symbol: 'circle',\n      symbolSize: 6,\n      lineStyle: { color: '#2ca02c', width: 1 },\n      itemStyle: { color: '#2ca02c' }\n    }\n  ]\n};\n\noption && myChart.setOption(option);\nwindow.addEventListener('resize', myChart.resize);"
  },
  "vega": {
    "import_script": "<script src=\"https://cdn.jsdelivr.net/npm/vega@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-lite@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-embed@6\"></script>",
    "body": "<div id=\"vis\"></div>",
    "css": "body { margin: 0; padding: 0; overflow: hidden; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center;} #vis { width: 95%; height: 95%; }",
    "data": "[\n  {\"id\": \"yes\", \"value\": {\"x\": \"0\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"0\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"0\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"1\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"1\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"1\", \"y\": 160, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"2\", \"y\": 100, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"2\", \"y\": 110, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"2\", \"y\": 80, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"3\", \"y\": 400, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"3\", \"y\": 420, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"3\", \"y\": 330, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"4\", \"y\": 150, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"4\", \"y\": 135, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"4\", \"y\": 120, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"5\", \"y\": 250, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"5\", \"y\": 245, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"5\", \"y\": 210, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"6\", \"y\": 40, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"6\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"6\", \"y\": 15, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"7\", \"y\": 20, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"7\", \"y\": 25, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"8\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"8\", \"y\": 35, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"9\", \"y\": 10, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"9\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"10\", \"y\": 30, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"10\", \"y\": 50, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"10\", \"y\": 45, \"pie_value\": 0}},\n  {\"id\": \"yes\", \"value\": {\"x\": \"11\", \"y\": 200, \"pie_value\": 0}},\n  {\"id\": \"no\", \"value\": {\"x\": \"11\", \"y\": 220, \"pie_value\": 0}},\n  {\"id\": \"none\", \"value\": {\"x\": \"11\", \"y\": 160, \"pie_value\": 0}}\n]",
    "script_render": "const spec = {\n  \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.json\",\n  \"width\": \"container\",\n  \"height\": \"container\",\n  \"data\": { \"values\": dataset },\n  \"layer\": [\n    {\n      \"mark\": \"bar\",\n      \"transform\": [\n        { \"filter\": \"datum.id !== 'none'\" }\n      ],\n      \"encoding\": {\n        \"x\": { \"field\": \"value.x\", \"type\": \"ordinal\", \"axis\": {\"labelAngle\": 0} },\n        \"y\": { \"field\": \"value.y\", \"type\": \"quantitative\", \"title\": \"Nr. Users\" },\n        \"xOffset\": { \"field\": \"id\" },\n        \"color\": { \n          \"field\": \"id\", \n          \"scale\": {\"domain\": [\"yes\", \"no\", \"none\"], \"range\": [\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\"]}\n        }\n      }\n    },\n    {\n      \"mark\": {\"type\": \"line\", \"point\": true},\n      \"transform\": [\n        { \"filter\": \"datum.id === 'none'\" }\n      ],\n      \"encoding\": {\n        \"x\": { \"field\": \"value.x\", \"type\": \"ordinal\" },\n        \"y\": { \"field\": \"value.y\", \"type\": \"quantitative\" },\n        \"color\": { \"field\": \"id\" }\n      }\n    }\n  ],\n  \"resolve\": {\"scale\": {\"color\": \"shared\"}}\n};\nvegaEmbed('#vis', spec);"
  }
}